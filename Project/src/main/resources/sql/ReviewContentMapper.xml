<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="test.dao.ReviewContentDao">
  <resultMap type="reviewContent" id="reviewContentMap">
    <id column="rbcno" property="reviewBoardContentNo"/> 
    <result column="rbno" property="reviewBoardNo"/>
    <result column="schno" property="scheduleNo"/> 
    <result column="cont" property="content"/>
    <result column="rbcpnm" property="reviewBoardContentPhotoName"/>
    <result column="st_dt" property="startDate"/>
    <result column="ed_dt" property="endDate"/>
    <result column="continent" property="continent"/>
    <result column="natn" property="nation"/>
    <result column="city" property="city"/>
  </resultMap>
  
  
  <select id="selectOne" resultMap="reviewContentMap" parameterType="int">
    select c.rbcno,c.rbno,c.schno,c.cont,c.rbcpnm,s.st_dt,s.ed_dt,l.cont continent,l.natn,l.city from tvl_review_conts c 
    inner join tvl_sch s on s.schno=c.schno
	inner join tvl_loc l on s.locno = l.locno
    where c.rbno=#{value}
  </select>
  
   <select id="reviewPhotoList" resultMap="reviewContentMap" parameterType="int">
    select rbcno, rbcpnm from tvl_review_conts
    where rbno=#{value}
  </select>
  
  <update id="reviewContentUpdate" parameterType="reviewContent">
    update tvl_review_conts set 
      cont=#{content},
      rbcpnm=#{reviewBoardContentPhotoName}
    where RBCNO=#{reviewBoardContentNo}
  </update> 
  <update id="reviewContentUpdate2" parameterType="reviewContent">
    update tvl_review_conts set 
      cont=#{content}
    where RBCNO=#{reviewBoardContentNo}
  </update> 
  
  <insert id="insert" parameterType="reviewContent" useGeneratedKeys="true" keyProperty="reviewBoardContentNo" keyColumn="rbcno">
    insert into tvl_review_conts(rbno,schno,cont,rbcpnm)
    values(#{reviewBoardNo},#{scheduleNo},#{content}, #{reviewBoardContentPhotoName})
  </insert>
  <delete id="delete"  parameterType="int">
    delete from tvl_review_conts 
    where RBCNO=#{value}
  </delete>
</mapper>




















